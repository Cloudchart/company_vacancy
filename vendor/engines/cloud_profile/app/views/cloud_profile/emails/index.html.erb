<%- class_for_main 'cloud-profile' -%>

<%- cloud_profile_nav_current_tab :settings -%>

<%= render partial: 'shared/settings_nav' %>


<article class="profile-emails">
  
  <section class="emails">
    
    <h1>
      <%= link_to font_awesome('angle-left'), :settings %>
      <%= t '.title', default: 'E-mails' %>
    </h1>
    
    <ul>
      <%= render partial: 'email', collection: current_user.emails, locals: { emails_count: current_user.emails.size } %>
      <%= render partial: 'token', collection: current_user.tokens.where(name: 'email-verification') %>
    </ul>
    
    <%= render partial: 'new_email_form', locals: { email: @email } if @email.present? %>

    <button class="new-email">
      <%= font_awesome 'plus' %>
    </button>
    
  </section>
  
</article>


<template id="new-email-form-template">
  <%= render partial: 'new_email_form', locals: { email: CloudProfile::Email.new } %>
</template>
