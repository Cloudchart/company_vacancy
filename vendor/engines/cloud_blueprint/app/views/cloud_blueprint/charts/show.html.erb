<%- pagescript_params id: @chart.to_param,
  chart:          @chart.as_json(only: [:uuid, :title]),
  load_url:       chart_path(@chart),
  nodes_url:      chart_nodes_path(@chart),
  vacancies_url:  chart_vacancies_path(@chart),
  people_url:     chart_people_path(@chart)
-%>

<%- class_for_root_tag header: 'white blueprint', main: :blueprint, footer: :blueprint -%>


<article class="chart">
  <aside class="person-vacancy-filter">
    <label class="search">
      <%= font_awesome 'search' %>
      <%= text_field_tag :search, nil, placeholder: t('.search_placeholder', default: 'People and vacancies'), class: :search, id: nil %>
    </label>
    
    <ul class="people-vacancies">
    </ul>
    
    <nav class="buttons">
      <button class="person cloud" data-behaviour="new-person">
        <%= font_awesome 'users' %>
      </button>

      <button class="vacancy cloud" data-behaviour="new-vacancy">
        <%= font_awesome 'briefcase' %>
      </button>
    </nav>
    
    <button class="toggle" data-toggle="fa-arrow-left|fa-arrow-right">
      <%= font_awesome 'arrow-right' %>
    </button>
  </aside>

  <section class="chart" id="<%= @chart.to_param %>" data-behaviour="chart-container">
    <svg>
    </svg>
  </section>
<article>
  
  
  
<template id="node-template">
  <div class="node" data-id="{{=uuid}}" style="background-color: {{=color}};">
    <h2>{{=title}}</h2>
    <ul>
      {{@people}}
        <li class="person">{{=_first_name}} {{=_last_name}}</li>
      {{/@people}}
      {{@vacancies}}
        <li class="vacancy">{{=_title}}</li>
      {{/@vacancies}}
    </ul>
  </div>
</template>


<template id="filter-person-template">
  <li data-id="{{=uuid}}" data-behaviour="draggable" class="person">
    <aside class="icon">
      <%= font_awesome 'users' %>
    </aside>
    <h2>
      <span class="first-name light">{{=first_name}}</span>
      <span class="last-name">{{=last_name}}</span>
    </h2>
    <p>
      {{=occupation}}
    </p>
  </li>
</template>


<template id="new-person-form">
  <%= render partial: 'cloud_blueprint/people/form' %>
</template>

<template id="new-vacancy-form">
  <%= render partial: 'cloud_blueprint/vacancies/form' %>
</template>


<template id="filter-vacancy-template">
  <li data-id="{{=uuid}}" data-behaviour="draggable" class="vacancy">
    <aside class="icon">
      <%= font_awesome 'briefcase' %>
    </aside>
    <h2>{{=name}}</h2>
    <p>
      Vacancy
    </p>
  </li>
</template>
