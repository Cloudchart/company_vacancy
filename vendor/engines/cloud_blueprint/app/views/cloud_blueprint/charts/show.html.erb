<%- pagescript_params id: @chart.to_param,
  chart:          @chart.as_json(only: [:uuid, :title]),
  load_url:       chart_path(@chart),
  nodes_url:      chart_nodes_path(@chart),
  vacancies_url:  chart_vacancies_path(@chart),
  people_url:     chart_people_path(@chart)
-%>

<%- class_for_root_tag header: 'white blueprint', main: :blueprint, footer: :blueprint -%>

<article class="chart" data-uuid="<%= @chart.to_param %>">
  <aside class="person-vacancy-filter">
    <label class="search">
      <%= font_awesome 'search' %>
      <%= text_field_tag :search, nil, placeholder: t('.search_placeholder', default: 'People and vacancies'), class: :search, id: nil %>
    </label>
    
    <ul class="people-vacancies">
    </ul>
    
    <nav class="buttons">
      <button class="person cloud" data-behaviour="new-person">
        <%= font_awesome 'users' %>
      </button>

      <button class="vacancy cloud" data-behaviour="new-vacancy">
        <%= font_awesome 'briefcase' %>
      </button>
    </nav>
    
    <button class="toggle" data-toggle="fa-arrow-left|fa-arrow-right">
      <%= font_awesome 'arrow-right' %>
    </button>
  </aside>

  <section class="chart" data-id="<%= @chart.to_param %>" data-behaviour="chart-container">
    <svg>
      <defs>
        <marker id="insertion-circle" viewBox="0 0 10 10" refX="2.5" refY="2.5" markerWidth="10" markerHeight="10" orient="auto" stroke="transparent" fill="black">
          <circle cx="2.5" cy="2.5" r="2.5" />
        </marker>
      </defs>
    </svg>
  </section>
<article>
  
  
  
<template id="node-template">
  <div class="node" data-id="{{=uuid}}" data-class-name="Node" data-behaviour="node droppable" data-droppable-target="node" style="background-color: {{=color}};">
    <h2>{{=title}}</h2>
    <ul>
      {{@people}}
        <li class="person">{{=_val.first_name}} {{=_val.last_name}}</li>
      {{/@people}}
      {{@vacancies}}
        <li class="vacancy">{{=_title}}</li>
      {{/@vacancies}}
    </ul>
  </div>
</template>
