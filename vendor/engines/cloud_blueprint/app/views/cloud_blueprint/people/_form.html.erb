<%- person ||= @person || @chart.company.people.build -%>

<%= form_for [@chart, person], remote: true, html: { class: :person } do |form| %>

  <aside class="avatar">
    <%= font_awesome 'users' %>
  </aside>

  <section class="name">
    <label>
      <%= form.text_field :first_name, class: :blueprint, autofocus: true, required: true, placeholder: t('.first_name_placeholder', default: 'Name') %>
    </label>
    <label>
      <%= form.text_field :last_name, class: :blueprint, required: true, placeholder: t('.last_name_placeholder', default: 'Surname') %>
    </label>
  </section>

  <label>
    <%= form.text_area :occupation, rows: 2, class: :blueprint, placeholder: t('.occupation_placeholder', default: 'Occupation') %>
  </label>
  
  <nav class="buttons">
    <%- if form.object.persisted? -%>
    
      <%= link_to [@chart, form.object], class: 'blueprint-button alert', method: :delete, remote: true do -%>
        <%= font_awesome 'times' %>
        <%= t '.delete_title', default: 'Delete' %>
      <%- end -%>
    
    <%- end -%>

    <div class="spacer"></div>

    <button class="blueprint">
      <%= font_awesome 'check' %>
      <%= t ".#{form.object.new_record? ? 'create' : 'update'}_button_title", default: form.object.new_record? ? 'Create' : 'Update' %>
    </button>
  </nav>
  
<%- end -%>
