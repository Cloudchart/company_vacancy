<%- node ||= @node || @chart.nodes.build -%>

<%= form_for [@chart, node], html: { class: 'node', data: { id: node.to_param } } do |form| %>
  <section class="title">
    <%= form.text_field :title, class: :blueprint, required: true, autocomplete: :off, autofocus: form.object.new_record?, placeholder: t('.title_placeholder', default: 'Title') %>
  </section>
  
  <section class="buttons">
    <%- if form.object.persisted? && form.object.children.length == 0 -%>
      <%= link_to [@chart, form.object], class: 'blueprint-button alert', data: { behaviour: :delete, id: form.object.to_param } do %>
        <%= font_awesome 'times' %>
        <%= t('.delete_link_title', default: 'Delete') %>
      <%- end -%>
    <%- end -%>
    
    <div class="spacer"></div>
    
    <button class="blueprint">
      <%= font_awesome 'check' %>
      <%= t ".#{form.object.persisted? ? 'update' : 'create' }_button_title", default: form.object.persisted? ? 'Update' : 'Create' %>
    </button>
  </section>
<%- end -%>
