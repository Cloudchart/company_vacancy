// Blocks

$blocks-background-color: hsl(0, 0, 96%);
$blocks-active-background-color: hsl(0, 0, 100%);
$blocks-color: hsl(60, 0, 35%);
$blocks-active-color: hsl(0, 0, 85%);
$blocks-title-background-color: hsl(0, 0, 93%);
$blocks-title-icon-color: hsl(0, 0, 78%);

@mixin grey-wrapper {
    position: relative;
    background-color: $white-smoke;
    border: 1px solid $alto;
    font-size: 12pt;
    color: $alto;
}

@mixin centered-frame {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}

div.companies-wrapper {

    $wrapper-padding: $base-unit * 13 + $base-unit;

    //padding-left: $wrapper-padding;
    //padding-right: $wrapper-padding;
    margin-top: $base-unit;
    padding: 0;
    position: relative;

    > nav {
        @include glued-editable-article-block('glued', $top: $base-unit, $left: $base-unit);

        background-color: $companies-wrapper-nav-background-color;
        left: 0;
        padding: $base-unit;
        position: absolute;
        top: 0;
        width: $base-unit * 13;
        
        ul, li {
          margin: 0;
          padding: 0;
          list-style: none;
        }
        
        > ul {
          
          
          > li.description {
            
            textarea {
              background-color: $companies-wrapper-nav-background-color;
              border: none;
              color: hsl(0, 0, 53%);
              font-size: 12pt;
              font-style: italic;
              padding: 0;
              resize: none;
              width: 100%;
            }
            
          }
          
          > li.links {
            font-size: 14pt;
            font-weight: 700;
            
            a {
              color: hsl(0, 1%, 34%);
              text-decoration: none;
            }
            
          }
          
          
        }
        
        ul > li:not(:first-child) {
          margin-top: $base-unit;
        }


    }
    
    article {
      margin: 0 $wrapper-padding;
      position: relative;
      
      > h2 {
        margin: 0 0 $base-unit / 2;
      }
      
      > section {
        //background-color: #eee;
        margin: $base-unit 0 $base-unit * 2;
        min-height: $base-unit;
        
        > nav {
          @include display(flex);
          
          a:not(:first-child) {
            margin-left: .5em;
          }

          a:not(:last-child) {
            margin-right: .5em;
          }
        }
        
        .identity-block {
          //background-color: #ccc;
          margin: $base-unit 0;
          padding-left: $base-unit * 2;
          position: relative;
          
          .handle {
            display: none;
            font-size: 15pt;
            left: 0;
            position: absolute;
            top: .1em;
          }
          
          &:hover .handle {
            display: block;
          }

        }
        
        
        
        
        
      }
      
      .droppable-placeholder {
        background: #000;
        height: 1pt;
        position: absolute;
        margin-top: - $base-unit / 2;
        width: 100%;
        left: 0;
        opacity: .25;
        z-index: 1000;
      }

    }

    articles {
        width: 100%;
        font-size: 16pt;
        line-height: 21pt;
        margin-top: -$base-unit;

        .empty {
            color: $alto;
            font-style: italic;
        }

        h2 {
            margin-top: $base-unit * 2;
            margin-left: $base-unit * 2;
            margin-bottom: $base-unit;
        }

        section {
          
          &.captured {
            border: 1px solid #000;
          }
          
            p, div {
                margin-bottom: $base-unit;
            }

            p {
                margin-left: $base-unit * 2;                
                position: relative;

                i {
                    position: absolute;
                    left: -$base-unit * 2;
                    cursor: -webkit-grab;
                }

                i:active {
                    cursor: -webkit-grabbing;
                }
            }

            div.chart-template {
                margin-top: $base-unit * 2;
                border: 1px solid $alto;
                border-left: none;
                border-right: none;
                height: $base-unit * 4;
                background: -webkit-linear-gradient(0, transparent 97%, $alto);
                background-size: $base-unit * 4;

                div.chart-hint {
                    width: $base-unit * 11;
                    margin: $base-unit * 0.8 auto;
                    text-align: center;
                    background-color: $mystic;
                    color: $white;

                    i, span {
                        font-size: 12pt;
                    }

                    span {
                        margin-left: $base-unit * 0.4;
                    }
                }
            }

            div.image-template {
                @include grey-wrapper;
                margin-left: $base-unit * 2;
                height: $base-unit * 22;

                div.image-hint {
                    @include centered-frame;
                    width: 250px;
                    height: 30%;

                    h4, p {
                        margin: 0 0 0 $base-unit * 1.3;
                    }

                    i {
                        position: absolute;
                        margin-top: $base-unit * 0.3;
                    }
                }
            }

            div.person-template {
                @include grey-wrapper;
                height: $base-unit * 7;
                width: $base-unit * 10;
                display: inline-block;
                margin-right: $base-unit;

                &:first-child {
                    margin-left: $base-unit * 2;
                }

                &:last-child {
                    margin-right: 0;
                }

                div.person-hint {
                    @include centered-frame;
                    width: $base-unit * 5;
                    height: 20%;
                    text-align: center;

                    span {
                        margin-left: $base-unit * 0.6;
                    }
                }
            }
        }

        div.temporary_nav {
            font-size: 10pt;
            margin-top: 100px;
        }
    }


    aside.blocks {
        @include editable-article-block;
        @include glued-editable-article-block('glued', $top: $base-unit, $right: $base-unit);
  
        position: absolute;
        right: 0;
        top: 0;
        width: $base-unit * 13;

        // NB! убрать нафиг
  
        > ul > li.drag {
            background-color: $blocks-background-color;
            color: hsl(120, 75%, 25%) !important;
            cursor: move;
            opacity: .75;
        }
  
    }

}
